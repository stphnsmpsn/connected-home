FROM rust:1.72.0-slim-bookworm
ARG DEBIAN_FRONTEND=noninteractive
RUN apt update && apt install -y \
    iputils-ping \
    libpq-dev \
    cmake \
    protobuf-compiler \
    openssl \
    libssl-dev
WORKDIR /app
RUN rustup component add rustfmt
CMD CARGO_TARGET_DIR=target/docker cargo build